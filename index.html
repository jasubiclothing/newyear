<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Happy New Year My Love ‚ù§Ô∏è</title>

<style>
  body{
    margin:0; padding:0;
    background: radial-gradient(circle at top, #16001f, #000);
    color:#fff;
    font-family:'Poppins', sans-serif;
    text-align:center;
    overflow-x:hidden;
    overflow-y:auto;
  }

  body::before{
    content:"";
    position:fixed; inset:0;
    background: linear-gradient(120deg, rgba(255,0,128,0.12), rgba(0,255,255,0.08), rgba(255,255,0,0.08));
    filter: blur(40px);
    animation: bgMove 8s ease-in-out infinite alternate;
    z-index:-3;
    pointer-events:none;
  }
  @keyframes bgMove{
    0% { transform: translate(-4%, -3%) scale(1.05); }
    100% { transform: translate(4%, 3%) scale(1.12); }
  }

  canvas#fx{
    position:fixed; inset:0;
    z-index:-2;
    pointer-events:none;
  }

  h1{
    margin-top:18px;
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    animation: glow 2s infinite alternate;
    letter-spacing: 1px;
  }
  @keyframes glow {
    from { text-shadow: 0 0 10px #ff0080, 0 0 25px #ff00ff; }
    to   { text-shadow: 0 0 25px #ff00ff, 0 0 45px #ff66cc; }
  }

  .pulse-heart{
    display:inline-block;
    font-size:34px;
    margin-top:6px;
    animation:pulse 1.2s infinite;
    filter: drop-shadow(0 0 14px rgba(255,102,204,0.9));
  }
  @keyframes pulse{
    0%{transform:scale(1)}
    50%{transform:scale(1.18)}
    100%{transform:scale(1)}
  }

  .card{
    width:min(92%, 720px);
    margin:12px auto 40px auto;
    padding:16px 14px;
    border-radius:18px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.12);
    backdrop-filter: blur(8px);
    box-shadow: 0 0 26px rgba(255,102,204,0.18);
    animation: fadeIn 1.6s ease;
  }
  @keyframes fadeIn{
    0%{opacity:0; transform:translateY(18px)}
    100%{opacity:1; transform:translateY(0)}
  }

  .message{
    font-size: clamp(1rem, 2.5vw, 1.2rem);
    line-height:1.55;
  }

  .typeLine{
    margin-top:10px;
    font-size: clamp(0.95rem, 2.2vw, 1.1rem);
    opacity:0.95;
    white-space:nowrap;
    overflow:hidden;
    border-right:2px solid rgba(255,255,255,0.7);
    width:0;
    animation: typing 4s steps(40,end) 1s forwards, caret 0.7s steps(1) infinite;
  }
  @keyframes typing{ to { width: 100%; } }
  @keyframes caret{ 50% { border-color: transparent; } }

  /* Video hidden initially (no empty space) */
  #videoWrap{ display:none; margin-top:14px; }
  #videoWrap.show{
    display:block;
    animation: videoReveal 0.9s ease forwards;
  }
  @keyframes videoReveal{
    0%{opacity:0; transform:translateY(12px) scale(0.98)}
    100%{opacity:1; transform:translateY(0) scale(1)}
  }

  video{
    width:min(92vw, 720px);
    max-height:50vh;
    border-radius:20px;
    box-shadow: 0 0 30px rgba(255,102,204,0.55);
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(0,0,0,0.35);
  }

  .btnRow{
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
    margin: 14px 0 0 0;
  }

  button{
    background:#ff0066;
    color:white;
    font-size:16px;
    padding:12px 18px;
    border-radius:30px;
    border:none;
    cursor:pointer;
    box-shadow: 0 0 18px rgba(255,102,204,0.7);
    transition: transform 0.15s ease, filter 0.15s ease;
  }
  button:hover{ filter:brightness(1.08); transform: translateY(-1px); }
  button:active{ transform: scale(0.98); }
  button:disabled{ opacity:0.6; cursor:not-allowed; transform:none; }

  /* Sound hidden until video appears */
  #soundBtn{ display:none; }
  #soundBtn.show{ display:inline-block; }

  /* Countdown button hidden until puzzle done */
  #countBtn{ display:none; }
  #countBtn.show{ display:inline-block; }

  .tinyNote{ margin-top:6px; font-size:12px; opacity:0.75; }

  /* Hearts */
  .heart{
    position:fixed; top:-20px;
    color:#ff66cc;
    font-size:24px;
    animation: fall 5s linear forwards;
    user-select:none; pointer-events:none;
    filter: drop-shadow(0 0 10px rgba(255,102,204,0.8));
    z-index:-1;
  }
  @keyframes fall { to { transform: translateY(115vh) rotate(360deg); opacity:0.85; } }

  /* Floating words */
  .floatWord{
    position:fixed; bottom:-30px;
    color: rgba(255,255,255,0.85);
    font-size:14px;
    padding:6px 10px;
    border-radius:999px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.10);
    backdrop-filter: blur(6px);
    animation: rise 6s linear forwards;
    pointer-events:none;
    z-index:-1;
  }
  @keyframes rise { to { transform: translateY(-120vh); opacity:0; } }

  /* Countdown overlay */
  #countdownOverlay{
    position:fixed; inset:0;
    display:grid; place-items:center;
    background: rgba(0,0,0,0.72);
    z-index:50;
    visibility:hidden;
    opacity:0;
    transition: opacity 0.25s ease;
  }
  #countdownOverlay.show{ visibility:visible; opacity:1; }
  #countText{
    font-size: clamp(3rem, 10vw, 6rem);
    text-shadow: 0 0 30px #ff00ff, 0 0 60px #ff66cc;
    animation: pop 0.65s ease infinite alternate;
  }
  @keyframes pop{ from{transform:scale(1)} to{transform:scale(1.08)} }

  /* Puzzle Modal */
  #puzzleModal{
    position:fixed; inset:0;
    background: rgba(0,0,0,0.72);
    display:none;
    place-items:center;
    z-index:60;
    padding:16px;
  }
  #puzzleModal.show{ display:grid; }

  .modalCard{
    width:min(92%, 520px);
    border-radius:18px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.14);
    backdrop-filter: blur(10px);
    box-shadow: 0 0 34px rgba(255,102,204,0.22);
    padding:18px 14px;
    animation: modalIn 0.25s ease;
  }
  @keyframes modalIn{
    from{ transform: translateY(10px); opacity:0; }
    to{ transform: translateY(0); opacity:1; }
  }

  .modalTitle{ font-size:1.05rem; opacity:0.95; margin-bottom:12px; }
  .modalQ{
    font-size:1.2rem;
    line-height:1.4;
    margin: 4px 0 14px 0;
    text-shadow: 0 0 18px rgba(255,102,204,0.25);
  }
  .modalBtns{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
  .ghostBtn{
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    box-shadow:none;
  }

  /* Block-exit modal */
  #blockExit{
    position:fixed; inset:0;
    background: rgba(0,0,0,0.76);
    display:none;
    place-items:center;
    z-index:70;
    padding:16px;
  }
  #blockExit.show{ display:grid; }
  .blockCard{
    width:min(92%, 480px);
    border-radius:18px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.14);
    backdrop-filter: blur(10px);
    box-shadow: 0 0 34px rgba(255,102,204,0.22);
    padding:18px 14px;
    animation: modalIn 0.25s ease;
  }

  /* Balloons (pop on Yes) */
  .balloon{
    position: fixed;
    bottom: -80px;
    width: 26px;
    height: 34px;
    border-radius: 50% 50% 45% 45%;
    opacity: 0.95;
    z-index: 59;
    pointer-events: none;
    filter: drop-shadow(0 0 10px rgba(255,255,255,0.12));
    animation: balloonRise 3.2s ease-out forwards;
  }
  .balloon::after{
    content:"";
    position:absolute;
    left:50%;
    top: 32px;
    width:2px;
    height: 40px;
    background: rgba(255,255,255,0.35);
    transform: translateX(-50%);
  }
  @keyframes balloonRise{
    0%{ transform: translateY(0) scale(0.9); opacity:0; }
    10%{ opacity:1; }
    100%{ transform: translateY(-120vh) scale(1.05); opacity:0; }
  }
</style>
</head>

<body>
<canvas id="fx"></canvas>

<h1>‚ú® ‚ù§Ô∏è Happy New Year WIFY ‚ù§Ô∏è ‚ú®</h1>
<div class="pulse-heart">üíñ</div>

<div class="card">
  <div class="message">
    Before 2025 ends, I just wanna tell you,<br>
    Thank you for coming into my life making me smile and laugh‚ù§Ô∏è<br>
    Thank you so much for being caring and understanding ‚Äî my biggest supporter‚ù§Ô∏è<br>
    I really really appreciate you so much ‚ù§Ô∏è<br>
    I love you so much motu wifyyyy ‚ù§Ô∏è<br>
  </div>

  <div class="typeLine" id="typeLine">‚ÄúEvery year is better with you in it.‚Äù ‚ú®</div>

  <div id="videoWrap">
    <video id="loveVideo" muted loop playsinline>
      <source src="video.mov" type="video/mp4">
    </video>
  </div>

  <div class="btnRow">
    <button id="surpriseBtn">üíå Surprise</button>
    <button id="countBtn">üéÜ Start Countdown</button>
    <button id="soundBtn">üîä Unmute</button>
  </div>

  <div class="tinyNote" id="noteText">Tap üíå Surprise üòâ</div>
</div>

<!-- Puzzle Modal -->
<div id="puzzleModal" aria-hidden="true">
  <div class="modalCard">
    <div class="modalTitle">üíû Mini Puzzle</div>
    <div class="modalQ" id="puzzleText">Have you read my feelings I wrote?</div>
    <div class="modalBtns">
      <button id="puzzleYes">Yes ‚ù§Ô∏è</button>
      <button id="puzzleClose" class="ghostBtn">Close</button>
    </div>
  </div>
</div>

<!-- Block Exit Modal -->
<div id="blockExit" aria-hidden="true">
  <div class="blockCard">
    <div class="modalTitle">üòå No Exit</div>
    <div class="modalQ" style="font-size:1.1rem;">
      You can‚Äôt exit‚Ä¶ you have to answer all üíñ
    </div>
    <div class="modalBtns">
      <button id="blockOk">OK ‚úÖ</button>
    </div>
  </div>
</div>

<!-- Countdown Overlay -->
<div id="countdownOverlay">
  <div id="countText">3</div>
</div>

<script>
  /* Hearts */
  setInterval(() => {
    const heart = document.createElement("div");
    heart.classList.add("heart");
    heart.innerText = Math.random() > 0.25 ? "‚ù§Ô∏è" : "üíó";
    heart.style.left = Math.random() * window.innerWidth + "px";
    heart.style.fontSize = (18 + Math.random() * 34) + "px";
    heart.style.animationDuration = (3.5 + Math.random() * 2.5) + "s";
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 7000);
  }, 260);

  /* Floating words */
  const words = ["I love you üíñ","My forever ‚ôæÔ∏è","Beautiful üòò","My safe place ü´∂","Mine ‚ù§Ô∏è","Always you ‚ú®","Motu üò≠‚ù§Ô∏è","Wifyyy üíç"];
  setInterval(() => {
    const w = document.createElement("div");
    w.className = "floatWord";
    w.innerText = words[Math.floor(Math.random()*words.length)];
    w.style.left = (10 + Math.random() * 80) + "vw";
    w.style.animationDuration = (5 + Math.random()*3) + "s";
    document.body.appendChild(w);
    setTimeout(() => w.remove(), 8000);
  }, 900);

  /* Elements */
  const video = document.getElementById("loveVideo");
  const videoWrap = document.getElementById("videoWrap");
  const soundBtn = document.getElementById("soundBtn");
  const countBtn = document.getElementById("countBtn");
  const surpriseBtn = document.getElementById("surpriseBtn");
  const overlay = document.getElementById("countdownOverlay");
  const countText = document.getElementById("countText");
  const noteText = document.getElementById("noteText");

  /* Mute/unmute */
  soundBtn.addEventListener("click", async () => {
    video.muted = !video.muted;
    soundBtn.textContent = video.muted ? "üîä Unmute" : "üîá Mute";
    try { await video.play(); } catch(e){}
  });

  /* Fireworks canvas */
  const canvas = document.getElementById("fx");
  const ctx = canvas.getContext("2d");
  let W, H;

  function resize(){
    W = canvas.width = window.innerWidth * devicePixelRatio;
    H = canvas.height = window.innerHeight * devicePixelRatio;
  }
  window.addEventListener("resize", resize);
  resize();

  let particles = [];
  function burst(count=24, xOverride=null, yOverride=null){
    const x = (xOverride ?? ((Math.random()*0.6 + 0.2) * W));
    const y = (yOverride ?? ((Math.random()*0.35 + 0.15) * H));
    for(let i=0;i<count;i++){
      const a = Math.random()*Math.PI*2;
      const s = (Math.random()*2.8 + 1.2) * devicePixelRatio;
      particles.push({
        x, y,
        vx: Math.cos(a)*s*8,
        vy: Math.sin(a)*s*8,
        life: 70 + Math.random()*30,
        r: 2 + Math.random()*2
      });
    }
  }

  function animate(){
    ctx.clearRect(0,0,W,H);
    ctx.globalCompositeOperation = "lighter";

    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.x += p.vx; p.y += p.vy;
      p.vx *= 0.96; p.vy *= 0.96;
      p.vy += 0.12 * devicePixelRatio;
      p.life -= 1;

      const alpha = Math.max(p.life/100, 0);
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r*devicePixelRatio, 0, Math.PI*2);
      ctx.fillStyle = `rgba(255, 102, 204, ${alpha})`;
      ctx.fill();

      if(p.life <= 0) particles.splice(i,1);
    }

    ctx.globalCompositeOperation = "source-over";
    requestAnimationFrame(animate);
  }
  animate();

  /* Balloons pop */
  function spawnBalloons(n=6){
    const colors = ["#ff4da6","#ffcc00","#66e3ff","#b266ff","#66ff99","#ff6b6b"];
    for(let i=0;i<n;i++){
      const b = document.createElement("div");
      b.className = "balloon";
      b.style.left = (5 + Math.random()*90) + "vw";
      b.style.animationDuration = (2.6 + Math.random()*1.6) + "s";
      b.style.background = colors[Math.floor(Math.random()*colors.length)];
      b.style.transform = `rotate(${(-10 + Math.random()*20)}deg)`;
      document.body.appendChild(b);
      setTimeout(()=> b.remove(), 4200);
    }
  }

  /* Puzzle */
  const puzzleModal = document.getElementById("puzzleModal");
  const puzzleText = document.getElementById("puzzleText");
  const puzzleYes = document.getElementById("puzzleYes");
  const puzzleClose = document.getElementById("puzzleClose");

  const blockExit = document.getElementById("blockExit");
  const blockOk = document.getElementById("blockOk");

  const puzzleSteps = [
    "Have you read my feelings I wrote? ü•∫",
    "Did you feel how much I love you? üíó",
    "Will you keep me in your 2026 too? ü´∂",
    "Okay‚Ä¶ you unlocked the countdown üéÜ"
  ];
  let step = 0;

  function openPuzzle(){
    step = 0;
    puzzleYes.textContent = "Yes ‚ù§Ô∏è";
    puzzleText.textContent = puzzleSteps[step];
    puzzleModal.classList.add("show");
    puzzleModal.setAttribute("aria-hidden","false");
  }

  function closePuzzleActually(){
    puzzleModal.classList.remove("show");
    puzzleModal.setAttribute("aria-hidden","true");
  }

  surpriseBtn.addEventListener("click", openPuzzle);

  puzzleClose.addEventListener("click", () => {
    blockExit.classList.add("show");
    blockExit.setAttribute("aria-hidden","false");
  });

  blockOk.addEventListener("click", () => {
    blockExit.classList.remove("show");
    blockExit.setAttribute("aria-hidden","true");
  });

  puzzleModal.addEventListener("click", (e) => {
    if (e.target === puzzleModal) {
      blockExit.classList.add("show");
      blockExit.setAttribute("aria-hidden","false");
    }
  });

  puzzleYes.addEventListener("click", () => {
    burst(28);
    spawnBalloons(7);

    step++;
    if (step < puzzleSteps.length) {
      puzzleText.textContent = puzzleSteps[step];
      if (step === puzzleSteps.length - 1) puzzleYes.textContent = "Unlock ‚úÖ";
    } else {
      closePuzzleActually();
      surpriseBtn.style.display = "none";
      countBtn.classList.add("show");
      noteText.textContent = "Now tap üéÜ Start Countdown üéâ";
    }
  });

  /* Countdown (silent) */
  let counting = false;

  async function startCountdown(){
    if (counting) return;
    counting = true;

    countBtn.disabled = true;
    let n = 3;

    overlay.classList.add("show");
    countText.textContent = n;

    const t = setInterval(async () => {
      n--;

      if (n > 0) {
        countText.textContent = n;
      } else if (n === 0) {
        countText.textContent = "üéâ";
        burst(50);
        spawnBalloons(10);
      } else {
        clearInterval(t);
        overlay.classList.remove("show");

        videoWrap.classList.add("show");
        soundBtn.classList.add("show");

        countBtn.style.display = "none";
        noteText.textContent = "‚ù§Ô∏è Press Unmute if you want sound ‚ù§Ô∏è";

        try { await video.play(); } catch(e){}
        counting = false;
      }
    }, 900);
  }

  countBtn.addEventListener("click", startCountdown);

  /* Ambient tiny bursts (optional) */
  setInterval(()=> burst(14), 2600);
</script>

</body>
</html>
